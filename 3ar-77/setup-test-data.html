<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup Test Data</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 2rem;
            background: #f5f5f5;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .button {
            background: #007bff;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 5px;
            cursor: pointer;
            margin: 0.5rem;
            font-size: 1rem;
            width: 100%;
        }
        .button:hover {
            background: #0056b3;
        }
        .button.success {
            background: #28a745;
        }
        .button.success:hover {
            background: #1e7e34;
        }
        .status {
            margin: 1rem 0;
            padding: 1rem;
            border-radius: 5px;
            background: #e9ecef;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Setup Test Data</h1>
        <p>Esta p√°gina configura datos de prueba en localStorage para el generador de marcadores.</p>
        
        <div class="status" id="status">
            Estado: Listo para configurar datos de prueba
        </div>
        
        <button class="button" onclick="setupTestData()">
            üöÄ Configurar Datos de Prueba
        </button>
        
        <button class="button success" onclick="goToGenerator()">
            üéØ Ir al Generador de Marcadores
        </button>
        
        <button class="button" onclick="clearAllData()">
            üóëÔ∏è Limpiar Todos los Datos
        </button>
        
        <button class="button" onclick="checkData()">
            üîç Verificar Datos Actuales
        </button>
    </div>

    <script>
        function setupTestData() {
            console.log('üöÄ Configurando datos de prueba...');
            updateStatus('üîÑ Configurando datos de prueba...', 'info');
            
            try {
                // Crear datos de prueba
                const testImage = {
                    name: 'imagen-prueba.jpg',
                    filename: 'imagen-prueba.jpg',
                    size: 1024000,
                    type: 'image/jpeg',
                    url: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAABAAEDASIAAwERAAIRAAPwA/8='
                };

                const testModel = {
                    name: 'modelo-prueba.glb',
                    filename: 'modelo-prueba.glb',
                    size: 2048000,
                    type: 'model/gltf-binary'
                };

                const testImage2 = {
                    name: 'imagen-2.png',
                    filename: 'imagen-2.png',
                    size: 512000,
                    type: 'image/png',
                    url: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='
                };

                const testModel2 = {
                    name: 'modelo-2.obj',
                    filename: 'modelo-2.obj',
                    size: 1536000,
                    type: 'model/obj'
                };

                // Agregar al localStorage
                localStorage.setItem('markerImage', JSON.stringify(testImage));
                localStorage.setItem('model3D', JSON.stringify(testModel));
                localStorage.setItem('uploadedFiles', JSON.stringify([testImage, testModel, testImage2, testModel2]));

                console.log('‚úÖ Datos de prueba configurados:', {
                    markerImage: testImage,
                    model3D: testModel,
                    uploadedFiles: [testImage, testModel, testImage2, testModel2]
                });

                updateStatus('‚úÖ Datos de prueba configurados exitosamente!', 'success');
                
            } catch (error) {
                console.error('‚ùå Error configurando datos:', error);
                updateStatus('‚ùå Error configurando datos: ' + error.message, 'error');
            }
        }

        function clearAllData() {
            console.log('üóëÔ∏è Limpiando todos los datos...');
            updateStatus('üîÑ Limpiando datos...', 'info');
            
            try {
                localStorage.removeItem('markerImage');
                localStorage.removeItem('model3D');
                localStorage.removeItem('uploadedFiles');
                localStorage.removeItem('webAR_project');
                
                console.log('‚úÖ Datos limpiados');
                updateStatus('‚úÖ Todos los datos han sido limpiados', 'success');
                
            } catch (error) {
                console.error('‚ùå Error limpiando datos:', error);
                updateStatus('‚ùå Error limpiando datos: ' + error.message, 'error');
            }
        }

        function checkData() {
            console.log('üîç Verificando datos actuales...');
            updateStatus('üîÑ Verificando datos...', 'info');
            
            try {
                const markerImage = localStorage.getItem('markerImage');
                const model3D = localStorage.getItem('model3D');
                const uploadedFiles = localStorage.getItem('uploadedFiles');
                
                const data = {
                    markerImage: markerImage ? JSON.parse(markerImage) : null,
                    model3D: model3D ? JSON.parse(model3D) : null,
                    uploadedFiles: uploadedFiles ? JSON.parse(uploadedFiles) : null
                };
                
                console.log('üìä Datos actuales:', data);
                
                let message = 'üìä Datos actuales:\n';
                message += `‚Ä¢ markerImage: ${data.markerImage ? '‚úÖ' : '‚ùå'}\n`;
                message += `‚Ä¢ model3D: ${data.model3D ? '‚úÖ' : '‚ùå'}\n`;
                message += `‚Ä¢ uploadedFiles: ${data.uploadedFiles ? `‚úÖ (${data.uploadedFiles.length} archivos)` : '‚ùå'}`;
                
                updateStatus(message, 'info');
                
            } catch (error) {
                console.error('‚ùå Error verificando datos:', error);
                updateStatus('‚ùå Error verificando datos: ' + error.message, 'error');
            }
        }

        function goToGenerator() {
            console.log('üéØ Navegando al generador de marcadores...');
            window.location.href = 'pages/marker-generator.html';
        }

        function updateStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = 'status';
            if (type === 'success') {
                status.classList.add('success');
            } else if (type === 'error') {
                status.classList.add('error');
            }
        }

        // Verificar datos al cargar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ Setup Test Data inicializado');
            checkData();
        });
    </script>
</body>
</html>
